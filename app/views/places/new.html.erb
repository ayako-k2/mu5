<%= render "shared/header" %>
<body>
 
  <input
    id="pac-input"
    class="controls"
    type="text"
    placeholder="登録したい場所を検索"
  />
  <div id="map" style="height: 500px; width: 100%;"></div>

  <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
  <script
    src="https://maps.googleapis.com/maps/api/js?key=<%= ENV["GOOGLE_MAPS_API_KEY"] %>&callback=initAutocomplete&libraries=places&v=weekly"
    async
    defer
  ></script>

  <% if flash[:alert] %>
  <div class="alert alert-danger">
    <%= flash[:alert] %>
  </div>
 <% end %>

  <%= form_with model: @place, id: "place-form", local: true do |form| %>
    <label for="place_name">この場所を登録しますか？</label>
    <%= form.text_field :name, id: "name", readonly: true %>
     <%= form.text_field :prefecture, id: "prefecture", readonly: true %>

    <%= form.hidden_field :category, id: "category" %>
    <%= form.hidden_field :address, id: "address" %>
    <%= form.hidden_field :url, id: "url" %>
    <%= form.hidden_field :website, id: "website" %>
    <%= form.hidden_field :latitude, id: "latitude" %>
    <%= form.hidden_field :longitude, id: "longitude" %>
    <%= form.hidden_field :place_id, id: "place_id" %>

    <%= form.submit "はい" %>
  <% end %>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // JavaScript コードのインクルード
      // Google Maps APIコードとその事件ハンドラをここに追加します
    });
  </script>
</body>

